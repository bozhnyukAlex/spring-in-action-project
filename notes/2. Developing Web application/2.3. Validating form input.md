# Validating form input
## Declaring Validation rules
We need to react to wrong input from user. It would be bad to make many if/else to check, because it's difficult to read and debug.
We will use **JavaBean Validation API**.
Some annotations from it:
- `@NotNull` - check for nun-null value.
- `@Size(min, message)` - Size of string or collection.
- `@CreditCardNumber` - make sure, that String matches credit card pattern
- `@Pattern` - match the Regex
- `@Digits(count, message)` - make sure that String is a number with count digits
- `@NotBlank` - make sure form is not empty. Check for empty String.
We will use this annotations for `Taco` and `TacoOrder` 
## Performing validation at form binding
Now we need to specify that validation should be performed when the forms are POSTed to handler methods. 
Annotation `@Valid` to `processTaco()` in `DesignTacoController` should do the trick. Also we add `Errors` parameter to specify logic for cases where the error occured.
```java
@PostMapping
public String processTaco(@Valid Taco taco, Errors errors,
          @ModelAttribute TacoOrder tacoOrder) { 
	 if (errors.hasErrors()) {
	      return "design"; 

	 }
	 tacoOrder.addTaco(taco);
     log.info("Processing taco: {}", taco); 
	 return "redirect:/orders/current";
}
```
`@Valid` annotation tells Spring MVC to perform validation to the submitted `Taco` onject after's it is bound to the form and before processTaco() is called. All errors will be captured in `Errors` object, and we can handle them.
Similar action are performed in `TacoOrder` .
##  Displaying validation errors
With Thymeleaf, it is easy. We have an access to the Errors object via fields property and with th:errors attribute.
Example for a credit card:
```html
<label for="ccNumber">Credit Card #: </label>
      <input type="text" th:field="*{ccNumber}"/>
      <span class="validationError" 
		  th:if="${#fields.hasErrors('ccNumber')}"
	      th:errors="*{ccNumber}">CC Num Error</span>
```
- `class` attribute - to style error.
- `th:if` - decide whether to display `<span>`. `fields` property has method `hasErrors()`, it it is true, `<span>` is rendered.
- `th:errors` references th ccNumber field and, assuming errors exist, it will replace placeholder text with error message.